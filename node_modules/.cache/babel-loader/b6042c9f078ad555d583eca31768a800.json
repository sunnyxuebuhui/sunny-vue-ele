{"remainingRequest":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/babel-loader/lib/index.js!/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyiquan/Vue/sunny-vue-ele/src/components/scroll.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/src/components/scroll.vue","mtime":1539684600803},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/cache-loader/dist/cjs.js","mtime":1539661153075},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/cache-loader/dist/cjs.js","mtime":1539661153075},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BScroll from 'better-scroll';\nexport default {\n  name: 'scroll',\n  created: function created() {\n    this.pullDownInitTop = -50;\n  },\n  data: function data() {\n    return {\n      beforePullDown: true,\n      pullUpDirty: true,\n      pullDownStyle: '',\n      isPullingDown: false,\n      isRebounding: false,\n      isPullUpLoad: false,\n      bubbleY: 0\n    };\n  },\n  props: {\n    probeType: {\n      type: Number,\n      default: 1\n    },\n    click: {\n      type: Boolean,\n      default: true\n    },\n    data: {\n      type: Array,\n      default: null\n    },\n    listenScroll: {\n      type: Boolean,\n      default: false\n    },\n    pullDownRefresh: {\n      type: null,\n      default: false\n    },\n    pullUpLoad: {\n      type: null,\n      default: false\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    setTimeout(function () {\n      _this._initScroll();\n    }, 20);\n  },\n  methods: {\n    _initScroll: function _initScroll() {\n      var _this2 = this;\n\n      if (!this.$refs.wrapper) {\n        return;\n      }\n\n      this.scroll = new BScroll(this.$refs.wrapper, {\n        probeType: this.probeType,\n        click: this.click,\n        pullDownRefresh: this.pullDownRefresh,\n        pullUpLoad: this.pullUpLoad\n      });\n\n      if (this.listenScroll) {\n        this.scroll.on('scroll', function (pos) {\n          _this2.$emit('scroll', pos);\n        });\n      }\n\n      if (this.pullDownRefresh) {\n        this._initPullDownRefresh();\n      }\n\n      if (this.pullUpLoad) {\n        this._initPullUpLoad();\n      }\n    },\n    _initPullDownRefresh: function _initPullDownRefresh() {\n      var _this3 = this;\n\n      this.scroll.on('pullingDown', function () {\n        _this3.beforePullDown = false;\n        _this3.isPullingDown = true;\n\n        _this3.$emit('pullingDown');\n      });\n      this.scroll.on('scroll', function (pos) {\n        if (!_this3.pullDownRefresh) {\n          return;\n        }\n\n        if (_this3.beforePullDown) {\n          _this3.bubbleY = Math.max(0, pos.y + _this3.pullDownInitTop);\n          _this3.pullDownStyle = \"top:\".concat(Math.min(pos.y + _this3.pullDownInitTop, 10), \"px\");\n        } else {\n          _this3.bubbleY = 0;\n        } // 是否反弹\n\n\n        if (_this3.isRebounding) {\n          _this3.pullDownStyle = \"top:\".concat(10 - (_this3.pullDownRefresh.stop - pos.y), \"px\");\n        }\n      });\n    },\n    _initPullUpLoad: function _initPullUpLoad() {\n      var _this4 = this;\n\n      this.scroll.on('pullingUp', function (pos) {\n        _this4.isPullUpLoad = true;\n\n        _this4.$emit('pullingUp');\n      });\n    },\n    _afterPullDown: function _afterPullDown() {\n      var _this5 = this;\n\n      setTimeout(function () {\n        _this5.pullDownStyle = \"top:\".concat(_this5.pullDownInitTop, \"px\");\n        _this5.beforePullDown = true;\n        _this5.isRebounding = false;\n\n        _this5.refresh();\n      }, this.scroll.options.bounceTime);\n    },\n    _reboundPullDown: function _reboundPullDown() {\n      var _this6 = this;\n\n      var _this$pullDownRefresh = this.pullDownRefresh.stopTime,\n          stopTime = _this$pullDownRefresh === void 0 ? 600 : _this$pullDownRefresh;\n      return new Promise(function (resolve) {\n        setTimeout(function () {\n          _this6.isRebounding = true;\n\n          _this6.scroll.finishPullDown();\n\n          resolve();\n        }, stopTime);\n      });\n    },\n    enable: function enable() {\n      this.scroll && this.scroll.enable();\n    },\n    // 通知组件数据更新完成\n    forceUpdate: function forceUpdate(dirty) {\n      var _this7 = this;\n\n      if (this.pullDownRefresh && this.isPullingDown) {\n        this.isPullingDown = false;\n\n        this._reboundPullDown().then(function () {\n          _this7._afterPullDown();\n        });\n      } else if (this.pullUpLoad && this.isPullUpLoad) {\n        this.isPullUpLoad = false;\n        this.scroll.finishPullUp();\n        this.pullUpDirty = dirty;\n        this.refresh();\n      } else {\n        this.refresh();\n      }\n    },\n    disable: function disable() {\n      this.scroll && this.scroll.disable();\n    },\n    refresh: function refresh() {\n      this.scroll && this.scroll.refresh();\n    },\n    scrollTo: function scrollTo() {\n      this.scroll && this.scroll.scrollTo.apply(this.scroll, arguments);\n    },\n    scrollToElement: function scrollToElement() {\n      this.scroll && this.scroll.scrollToElement.apply(this.scroll, arguments);\n    }\n  },\n  watch: {\n    data: function data() {\n      var _this8 = this;\n\n      setTimeout(function () {\n        _this8.refresh();\n      }, 20);\n    }\n  }\n};",{"version":3,"sources":["scroll.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div ref=\"wrapper\" class=\"better-scroll-wrapper\">\n    <div class=\"scroll-content\">\n      <div ref=\"listWrapper\">\n        <slot></slot>\n      </div>\n      <div class=\"pull-up-tip\" v-if=\"pullUpLoad\">\n        <div class=\"before-trigger\" v-if=\"!isPullUpLoad\">\n          <span>没有更多数据</span>\n        </div>\n        <div class=\"after-trigger\" v-else>\n          <spinner type=\"ios-small\"/>&nbsp;加载更多...\n        </div>\n      </div>\n    </div>\n    <div class=\"refresh-tip\" :style=\"pullDownStyle\" v-if=\"pullDownRefresh\">\n      <div class=\"before-trigger\" v-if=\"beforePullDown\">\n        <bubble :y=\"bubbleY\"/>\n      </div>\n      <div class=\"after-trigger\" v-else>\n        <div v-if=\"isPullingDown\" class=\"loading\">\n          <spinner type=\"ios-small\"/>\n        </div>\n        <!--<div v-else><span>{{refreshTxt}}</span></div>-->\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import BScroll from 'better-scroll'\n  export default {\n    name: 'scroll',\n    created () {\n      this.pullDownInitTop = -50\n    },\n    data () {\n      return {\n        beforePullDown: true,\n        pullUpDirty: true,\n        pullDownStyle: '',\n        isPullingDown: false,\n        isRebounding: false,\n        isPullUpLoad: false,\n        bubbleY: 0\n      }\n    },\n    props: {\n      probeType: {\n        type: Number,\n        default: 1\n      },\n      click: {\n        type: Boolean,\n        default: true\n      },\n      data: {\n        type: Array,\n        default: null\n      },\n      listenScroll: {\n        type: Boolean,\n        default: false\n      },\n      pullDownRefresh: {\n        type: null,\n        default: false\n      },\n      pullUpLoad: {\n        type: null,\n        default: false\n      },\n    },\n    mounted () {\n      setTimeout(() => {\n        this._initScroll()\n      }, 20)\n    },\n    methods: {\n      _initScroll () {\n        if (!this.$refs.wrapper) {\n          return\n        }\n        this.scroll = new BScroll(this.$refs.wrapper, {\n          probeType: this.probeType,\n          click: this.click,\n          pullDownRefresh: this.pullDownRefresh,\n          pullUpLoad: this.pullUpLoad\n        });\n        if (this.listenScroll) {\n          this.scroll.on('scroll', (pos) => {\n            this.$emit('scroll', pos)\n          })\n        }\n        if (this.pullDownRefresh) {\n          this._initPullDownRefresh()\n        }\n        if (this.pullUpLoad) {\n          this._initPullUpLoad()\n        }\n      },\n      _initPullDownRefresh () {\n        this.scroll.on('pullingDown', () => {\n          this.beforePullDown = false;\n          this.isPullingDown = true;\n          this.$emit('pullingDown');\n        });\n        this.scroll.on('scroll', (pos) => {\n          if (!this.pullDownRefresh) {\n            return\n          }\n          if (this.beforePullDown) {\n            this.bubbleY = Math.max(0, pos.y + this.pullDownInitTop);\n            this.pullDownStyle = `top:${Math.min(pos.y + this.pullDownInitTop, 10)}px`\n          } else {\n            this.bubbleY = 0\n          }\n          // 是否反弹\n          if (this.isRebounding) {\n            this.pullDownStyle = `top:${10 - (this.pullDownRefresh.stop - pos.y)}px`\n          }\n        })\n      },\n      _initPullUpLoad() {\n        this.scroll.on('pullingUp', (pos) => {\n          this.isPullUpLoad = true;\n          this.$emit('pullingUp')\n        })\n\n      },\n      _afterPullDown() {\n        setTimeout(() => {\n          this.pullDownStyle = `top:${this.pullDownInitTop}px`;\n          this.beforePullDown = true;\n          this.isRebounding = false;\n          this.refresh()\n        }, this.scroll.options.bounceTime)\n      },\n      _reboundPullDown () {\n        const {stopTime = 600} = this.pullDownRefresh;\n        return new Promise((resolve) => {\n          setTimeout(() => {\n            this.isRebounding = true;\n            this.scroll.finishPullDown();\n            resolve()\n          }, stopTime)\n        })\n      },\n      enable () {\n        this.scroll && this.scroll.enable()\n      },\n      // 通知组件数据更新完成\n      forceUpdate (dirty) {\n        if (this.pullDownRefresh && this.isPullingDown) {\n          this.isPullingDown = false;\n          this._reboundPullDown().then(() => {\n            this._afterPullDown()\n          })\n        } else if (this.pullUpLoad && this.isPullUpLoad) {\n          this.isPullUpLoad = false;\n          this.scroll.finishPullUp();\n          this.pullUpDirty = dirty;\n          this.refresh()\n        } else {\n          this.refresh()\n        }\n      },\n      disable () {\n        this.scroll && this.scroll.disable()\n      },\n      refresh () {\n        this.scroll && this.scroll.refresh()\n      },\n      scrollTo () {\n        this.scroll && this.scroll.scrollTo.apply(this.scroll, arguments)\n      },\n      scrollToElement () {\n        this.scroll && this.scroll.scrollToElement.apply(this.scroll, arguments)\n      }\n    },\n    watch: {\n      data () {\n        setTimeout(() => {\n          this.refresh()\n        }, 20)\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/scss\" scoped type=\"text/scss\">\n  .better-scroll-wrapper\n    position absolute\n    right 0\n    left 0\n    top 0\n    bottom 0\n    .refresh-tip\n      width:100%\n      position absolute\n      left 0\n      top -50px\n      display flex\n      justify-content center\n      align-items center\n      transition all\n      font-size 12px\n    .pull-up-tip\n      display flex\n      justify-content center\n      align-items center\n      transition all\n      font-size 12px\n      padding 10px 0\n\n</style>\n"],"sourceRoot":"src/components"}]}