{"remainingRequest":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyiquan/Vue/sunny-vue-ele/src/components/scroll.vue?vue&type=style&index=0&id=7920825d&lang=stylus&rel=stylesheet%2Fscss&scoped=true&","dependencies":[{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/src/components/scroll.vue","mtime":1539684600803},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/cache-loader/dist/cjs.js","mtime":1539661153075},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.better-scroll-wrapper\n  position absolute\n  right 0\n  left 0\n  top 0\n  bottom 0\n  .refresh-tip\n    width:100%\n    position absolute\n    left 0\n    top -50px\n    display flex\n    justify-content center\n    align-items center\n    transition all\n    font-size 12px\n  .pull-up-tip\n    display flex\n    justify-content center\n    align-items center\n    transition all\n    font-size 12px\n    padding 10px 0\n\n",{"version":3,"sources":["scroll.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scroll.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div ref=\"wrapper\" class=\"better-scroll-wrapper\">\n    <div class=\"scroll-content\">\n      <div ref=\"listWrapper\">\n        <slot></slot>\n      </div>\n      <div class=\"pull-up-tip\" v-if=\"pullUpLoad\">\n        <div class=\"before-trigger\" v-if=\"!isPullUpLoad\">\n          <span>没有更多数据</span>\n        </div>\n        <div class=\"after-trigger\" v-else>\n          <spinner type=\"ios-small\"/>&nbsp;加载更多...\n        </div>\n      </div>\n    </div>\n    <div class=\"refresh-tip\" :style=\"pullDownStyle\" v-if=\"pullDownRefresh\">\n      <div class=\"before-trigger\" v-if=\"beforePullDown\">\n        <bubble :y=\"bubbleY\"/>\n      </div>\n      <div class=\"after-trigger\" v-else>\n        <div v-if=\"isPullingDown\" class=\"loading\">\n          <spinner type=\"ios-small\"/>\n        </div>\n        <!--<div v-else><span>{{refreshTxt}}</span></div>-->\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import BScroll from 'better-scroll'\n  export default {\n    name: 'scroll',\n    created () {\n      this.pullDownInitTop = -50\n    },\n    data () {\n      return {\n        beforePullDown: true,\n        pullUpDirty: true,\n        pullDownStyle: '',\n        isPullingDown: false,\n        isRebounding: false,\n        isPullUpLoad: false,\n        bubbleY: 0\n      }\n    },\n    props: {\n      probeType: {\n        type: Number,\n        default: 1\n      },\n      click: {\n        type: Boolean,\n        default: true\n      },\n      data: {\n        type: Array,\n        default: null\n      },\n      listenScroll: {\n        type: Boolean,\n        default: false\n      },\n      pullDownRefresh: {\n        type: null,\n        default: false\n      },\n      pullUpLoad: {\n        type: null,\n        default: false\n      },\n    },\n    mounted () {\n      setTimeout(() => {\n        this._initScroll()\n      }, 20)\n    },\n    methods: {\n      _initScroll () {\n        if (!this.$refs.wrapper) {\n          return\n        }\n        this.scroll = new BScroll(this.$refs.wrapper, {\n          probeType: this.probeType,\n          click: this.click,\n          pullDownRefresh: this.pullDownRefresh,\n          pullUpLoad: this.pullUpLoad\n        });\n        if (this.listenScroll) {\n          this.scroll.on('scroll', (pos) => {\n            this.$emit('scroll', pos)\n          })\n        }\n        if (this.pullDownRefresh) {\n          this._initPullDownRefresh()\n        }\n        if (this.pullUpLoad) {\n          this._initPullUpLoad()\n        }\n      },\n      _initPullDownRefresh () {\n        this.scroll.on('pullingDown', () => {\n          this.beforePullDown = false;\n          this.isPullingDown = true;\n          this.$emit('pullingDown');\n        });\n        this.scroll.on('scroll', (pos) => {\n          if (!this.pullDownRefresh) {\n            return\n          }\n          if (this.beforePullDown) {\n            this.bubbleY = Math.max(0, pos.y + this.pullDownInitTop);\n            this.pullDownStyle = `top:${Math.min(pos.y + this.pullDownInitTop, 10)}px`\n          } else {\n            this.bubbleY = 0\n          }\n          // 是否反弹\n          if (this.isRebounding) {\n            this.pullDownStyle = `top:${10 - (this.pullDownRefresh.stop - pos.y)}px`\n          }\n        })\n      },\n      _initPullUpLoad() {\n        this.scroll.on('pullingUp', (pos) => {\n          this.isPullUpLoad = true;\n          this.$emit('pullingUp')\n        })\n\n      },\n      _afterPullDown() {\n        setTimeout(() => {\n          this.pullDownStyle = `top:${this.pullDownInitTop}px`;\n          this.beforePullDown = true;\n          this.isRebounding = false;\n          this.refresh()\n        }, this.scroll.options.bounceTime)\n      },\n      _reboundPullDown () {\n        const {stopTime = 600} = this.pullDownRefresh;\n        return new Promise((resolve) => {\n          setTimeout(() => {\n            this.isRebounding = true;\n            this.scroll.finishPullDown();\n            resolve()\n          }, stopTime)\n        })\n      },\n      enable () {\n        this.scroll && this.scroll.enable()\n      },\n      // 通知组件数据更新完成\n      forceUpdate (dirty) {\n        if (this.pullDownRefresh && this.isPullingDown) {\n          this.isPullingDown = false;\n          this._reboundPullDown().then(() => {\n            this._afterPullDown()\n          })\n        } else if (this.pullUpLoad && this.isPullUpLoad) {\n          this.isPullUpLoad = false;\n          this.scroll.finishPullUp();\n          this.pullUpDirty = dirty;\n          this.refresh()\n        } else {\n          this.refresh()\n        }\n      },\n      disable () {\n        this.scroll && this.scroll.disable()\n      },\n      refresh () {\n        this.scroll && this.scroll.refresh()\n      },\n      scrollTo () {\n        this.scroll && this.scroll.scrollTo.apply(this.scroll, arguments)\n      },\n      scrollToElement () {\n        this.scroll && this.scroll.scrollToElement.apply(this.scroll, arguments)\n      }\n    },\n    watch: {\n      data () {\n        setTimeout(() => {\n          this.refresh()\n        }, 20)\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/scss\" scoped type=\"text/scss\">\n  .better-scroll-wrapper\n    position absolute\n    right 0\n    left 0\n    top 0\n    bottom 0\n    .refresh-tip\n      width:100%\n      position absolute\n      left 0\n      top -50px\n      display flex\n      justify-content center\n      align-items center\n      transition all\n      font-size 12px\n    .pull-up-tip\n      display flex\n      justify-content center\n      align-items center\n      transition all\n      font-size 12px\n      padding 10px 0\n\n</style>\n"]}]}