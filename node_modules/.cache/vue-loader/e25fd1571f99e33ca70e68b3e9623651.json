{"remainingRequest":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyiquan/Vue/sunny-vue-ele/src/views/index/index.vue?vue&type=style&index=0&id=498142aa&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/src/views/index/index.vue","mtime":1539933188498},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/cache-loader/dist/cjs.js","mtime":1539661153075},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.wrapper\n  margin-top .44rem\n  width 100%\n  height 100%\n  .content_wrapper\n    position relative\n    width 100%\n    height calc(100% - .88rem)\n    overflow hidden\n    box-sizing border-box\n    .food_list\n      margin-bottom .2rem\n      display flex\n      flex-wrap wrap\n      width 100%\n      border-bottom 1px solid #eee\n      background-color #fff\n      li \n        display flex\n        padding .15rem 0\n        justify-content center\n        align-items center\n        flex 0 0 25%\n        flex-direction column\n        img \n          width .4rem\n          height .4rem\n        p\n          margin-top .1rem\n          font-size .14rem\n\n\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <head-top :headTitle=\"headTitle\" @centerClick=\"centerClick\" :signinUp=\"true\"></head-top>\n    <section class=\"content_wrapper\">\n      <scroll :data=\"foodTypes\" ref=\"scrollFood\">\n        <ul class=\"food_list\">\n          <li v-for=\"(item, index) in foodTypes\" :key=\"index\">\n            <img :src='`${imgBaseUrl}${item.image_url}`' alt=\"\">\n            <p>{{item.title}}</p>\n          </li> \n        </ul>\n        <shop-list @shopListLoaded=\"shopListLoaded\"></shop-list>\n      </scroll>\n    </section>\n    <footer-guide></footer-guide>\n  </div>\n</template>\n\n<script>\n  import {mapMutations} from 'vuex'\n  import HeadTop from '../../components/head.vue'\n  import FooterGuide from '../../components/footer.vue'\n  import ShopList from './shopList'\n  import {msiteAddress, msiteFoodTypes, cityGuess} from '../../service/getData'\n\n  export default {\n    components: {\n      HeadTop,\n      FooterGuide,\n      ShopList\n    },\n    data() {\n      return {\n        headTitle: '请选择地址...', // 标题\n        geohash: '', // city页面传递过来的地址geohash\n        hasGetData: false, //是否已经获取地理位置数据，成功之后再获取商铺列表信息\n        foodTypes: [], // 食品分类列表\n        imgBaseUrl: 'https://fuss10.elemecdn.com' //图片域名地址\n      }\n    },\n    async beforeMount() {\n      const address = await cityGuess();\n      if (!this.$route.query.geohash) {\n\t\t\t  const address = await cityGuess()\n        this.geohash = `${address.latitude},${address.longitude}`\n      } else {\n        this.geohash = this.$route.query.geohash\n      }\n\n      //保存geohash 到vuex\n\t\t  this.SAVE_GEOHASH(this.geohash)\n    \t//获取位置信息\n      let res = await msiteAddress(this.geohash)\n    \tthis.headTitle = res.name\n    \t// 记录当前经度纬度\n    \tthis.RECORD_ADDRESS(res)\n\n    \tthis.hasGetData = true\n    },\n    mounted() {\n      this._initGetFoodList()\n    },\n    methods: {\n      shopListLoaded(){\n        let scrolls = this.$refs.scrollFood\n        setTimeout(() => {\n          scrolls.refresh()\n        }, 20)\n      },\n      _initGetFoodList() {\n        //获取导航食品类型列表\n       \tmsiteFoodTypes(this.geohash).then(res => {\n       \t  if (res.length >= 8) {\n            this.foodTypes = res.slice(0, 8)\n          } else {\n            this.foodTypes = res\n          }\n        }).then(() => {\n        \n        })\n      },\n      ...mapMutations([\n        'SAVE_GEOHASH',\n        'RECORD_ADDRESS'\n    \t]),\n    },\n  }\n</script>\n\n<style scoped lang=\"stylus\">\n  .wrapper\n    margin-top .44rem\n    width 100%\n    height 100%\n    .content_wrapper\n      position relative\n      width 100%\n      height calc(100% - .88rem)\n      overflow hidden\n      box-sizing border-box\n      .food_list\n        margin-bottom .2rem\n        display flex\n        flex-wrap wrap\n        width 100%\n        border-bottom 1px solid #eee\n        background-color #fff\n        li \n          display flex\n          padding .15rem 0\n          justify-content center\n          align-items center\n          flex 0 0 25%\n          flex-direction column\n          img \n            width .4rem\n            height .4rem\n          p\n            margin-top .1rem\n            font-size .14rem\n\n\n</style>"]}]}