{"remainingRequest":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyiquan/Vue/sunny-vue-ele/src/views/index/shopList.vue?vue&type=style&index=0&id=122e9d6b&scoped=true&lang=stylus&","dependencies":[{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/src/views/index/shopList.vue","mtime":1539748500841},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/cache-loader/dist/cjs.js","mtime":1539661153075},{"path":"/Users/chenyiquan/Vue/sunny-vue-ele/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nul \n  width 100%\n  height 100%\n  li:last-child\n    border none\n  li \n    display flex\n    padding  .18rem .1rem\n    width 100%\n    box-sizing border-box\n    font-size .14rem\n    border-bottom 1px solid #eee\n    .left_img\n      flex 0 0 .64rem\n      img\n        width .64rem\n        height .64rem\n    .right_text\n      display flex\n      flex-direction column\n      justify-content center\n      padding-left .1rem\n      flex 1\n      width 100%\n      box-sizing border-box\n      .title \n        display flex\n        justify-content space-between\n        align-items center\n        .t_left\n          font-size .14rem\n          color #333\n          font-weight 700\n          .brand\n            display inline-block\n            width .3rem\n            height .15rem\n            line-height .17rem\n            font-size .11rem\n            text-align center\n            color #000\n            font-weight normal\n            background-color #ffd930\n        .t_right\n          span \n            font-size .1rem\n            color #999\n            border 1px solid #f1f1f1\n            border-radius .03rem\n      .rate\n        display flex\n        padding .05rem 0\n        justify-content space-between\n        align-items center\n        .r_left\n          display flex\n          align-items center\n          width 70%\n          .sale_num\n            display inline-block\n            font-size .1rem\n            color #666\n            transform scale(.8)\n          .rating_num\n            margin-left .07rem\n            color #ff9a0d\n            font-size .1rem\n            transform scale(.8)\n        .r_right\n          .delivery_mode\n            margin-right -.07rem\n            display inline-block\n            color #fff\n            font-size .1rem\n            background-color #008de1\n            transform scale(.8)\n            border 1px solid #008de1\n          .time\n            display inline-block\n            color #008de1\n            font-size .1rem\n            border 1px solid #008de1\n            transform scale(.8)\n      .fee_distance\n        display flex\n        justify-content space-between\n        align-items center\n        font-size .1rem\n        .fee\n          color #666\n          font-size .08rem\n          transform scale(.9)\n        .distance\n          color #999\n          font-size .08rem\n          transform scale(.9)\n          .time\n            color #008de1\n",{"version":3,"sources":["shopList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shopList.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\n  <ul>\n    <li v-for=\"(item, index) in shopList\" :key=\"index\">\n      <div class=\"left_img\">\n        <img :src=\"`${imgBaseUrl}${item.image_path}`\" alt=\"\">\n      </div>\n      <div class=\"right_text\">\n        <div class=\"title\">\n          <p class=\"t_left\">\n            <span class=\"brand\" v-if=\"item.is_premium\">品牌</span>\n            {{item.name}}\n          </p>\n          <p class=\"t_right\">\n            <span v-for=\"(v, i) in  item.supports\" :key=\"i\">{{v.icon_name}}</span>\n          </p>\n        </div>\n        <div class=\"rate\">\n          <p class=\"r_left\"><star :rating=\"item.rating\"></star><span class=\"rating_num\">{{item.rating}}</span><span class=\"sale_num\">月售{{item.recent_order_num}}单</span></p>\n          <p class=\"r_right\">\n            <span class=\"delivery_mode\" v-if=\"item.delivery_mode\">{{item.delivery_mode.text}}</span><span class=\"time\" v-if=\"checkPunctual(item.supports)\">准时达</span>\n          </p>\n        </div>\n        <div class=\"fee_distance\">\n          <p class=\"fee\">\n            <span>¥{{item.float_minimum_order_amount}}起送</span>&nbsp;/&nbsp;{{item.piecewise_agent_fee.tips}}\n          </p>\n          <p class=\"distance\">\n            <span class=\"dis_num\">{{item.distance}}&nbsp;/&nbsp;</span><span class=\"time\">{{item.order_lead_time}}</span>\n          </p>\n        </div>\n      </div>\n    </li>\n  </ul>\n</template>\n\n<script>\n  import Star from '../../components/star'\n  import {mapState} from 'vuex'\n  import {shopList} from '../../service/getData'\n  import {imgBaseUrl} from '../../config/env'\n\n  export default {\n    components: {\n      Star\n    },\n    props: {\n      restaurantCategoryId: {\n        type: String,\n        default: null \n      }\n    },\n    data() {\n      return {\n        offset: 0, // 批次加载店铺列表，每次加载20个 limit = 20\n        shopList:[], // 店铺列表数据\n        imgBaseUrl,\n      }\n    },\n    mounted() {     \n      this._initData()\n    },\n    methods: {\n      async _initData() {\n        //获取数据\n        if (this.latitude && this.longitude) {\n          this.shopList = await shopList(this.latitude, this.longitude, this.offset, this.restaurantCategoryId)\n          console.log(this.shopList)\n        } \n      },\n      // 检验数组是否有准时标志\n      checkPunctual(arr) {\n        let flag = false\n        if (arr instanceof Array && arr.length) {\n          flag = arr.some(item => item.name === '准时达')\n        } \n        return flag\n      }\n    },\n    computed: {\n      ...mapState([\n        'latitude',\n        'longitude'\n      ]),\n    },\n    watch: {\n      latitude() {\n        this._initData()\n      },\n      shopList(){\n        this.$emit('shopListLoaded');\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"stylus\">\n    ul \n      width 100%\n      height 100%\n      li:last-child\n        border none\n      li \n        display flex\n        padding  .18rem .1rem\n        width 100%\n        box-sizing border-box\n        font-size .14rem\n        border-bottom 1px solid #eee\n        .left_img\n          flex 0 0 .64rem\n          img\n            width .64rem\n            height .64rem\n        .right_text\n          display flex\n          flex-direction column\n          justify-content center\n          padding-left .1rem\n          flex 1\n          width 100%\n          box-sizing border-box\n          .title \n            display flex\n            justify-content space-between\n            align-items center\n            .t_left\n              font-size .14rem\n              color #333\n              font-weight 700\n              .brand\n                display inline-block\n                width .3rem\n                height .15rem\n                line-height .17rem\n                font-size .11rem\n                text-align center\n                color #000\n                font-weight normal\n                background-color #ffd930\n            .t_right\n              span \n                font-size .1rem\n                color #999\n                border 1px solid #f1f1f1\n                border-radius .03rem\n          .rate\n            display flex\n            padding .05rem 0\n            justify-content space-between\n            align-items center\n            .r_left\n              display flex\n              align-items center\n              width 70%\n              .sale_num\n                display inline-block\n                font-size .1rem\n                color #666\n                transform scale(.8)\n              .rating_num\n                margin-left .07rem\n                color #ff9a0d\n                font-size .1rem\n                transform scale(.8)\n            .r_right\n              .delivery_mode\n                margin-right -.07rem\n                display inline-block\n                color #fff\n                font-size .1rem\n                background-color #008de1\n                transform scale(.8)\n                border 1px solid #008de1\n              .time\n                display inline-block\n                color #008de1\n                font-size .1rem\n                border 1px solid #008de1\n                transform scale(.8)\n          .fee_distance\n            display flex\n            justify-content space-between\n            align-items center\n            font-size .1rem\n            .fee\n              color #666\n              font-size .08rem\n              transform scale(.9)\n            .distance\n              color #999\n              font-size .08rem\n              transform scale(.9)\n              .time\n                color #008de1\n</style>"]}]}